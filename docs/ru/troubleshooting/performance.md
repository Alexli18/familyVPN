# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –æ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –º–µ—Ç–æ–¥—ã –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –¥–ª—è Family VPN Server.

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ú–µ–¥–ª–µ–Ω–Ω–æ–µ VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–∏–∑–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
- –í—ã—Å–æ–∫–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏/–≤—Ä–µ–º—è –ø–∏–Ω–≥–∞
- –¢–∞–π–º–∞—É—Ç—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –≤–µ–±-—Å–µ—Ä—Ñ–∏–Ω–≥ —á–µ—Ä–µ–∑ VPN

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏:**

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –±–µ–∑ VPN
speedtest-cli  # –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
curl -o /dev/null -s -w "%{speed_download}\n" http://speedtest.wdc01.softlayer.com/downloads/test100.zip

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ VPN –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
iperf3 -s  # –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
iperf3 -c server-ip  # –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ip -s link show tun0
cat /proc/net/dev | grep tun0
```

**–†–µ—à–µ–Ω–∏—è:**

```bash
# 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ OpenVPN
# –î–æ–±–∞–≤–∏—Ç—å –≤ openvpn.conf:
echo "sndbuf 0" >> certificates/openvpn.conf
echo "rcvbuf 0" >> certificates/openvpn.conf
echo "fast-io" >> certificates/openvpn.conf
echo "comp-lzo adaptive" >> certificates/openvpn.conf

# 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ MTU
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–≥–æ MTU
ping -M do -s 1472 8.8.8.8  # –ù–∞—á–Ω–∏—Ç–µ —Å 1472, —É–º–µ–Ω—å—à–∞–π—Ç–µ –ø—Ä–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
# –î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
echo "tun-mtu 1500" >> certificates/openvpn.conf
echo "mssfix 1460" >> certificates/openvpn.conf

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ UDP (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –Ω–æ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ)
grep "proto udp" certificates/openvpn.conf

# 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –≤—ã–±–æ—Ä–∞ —à–∏—Ñ—Ä–∞
echo "cipher AES-256-GCM" >> certificates/openvpn.conf
echo "auth SHA256" >> certificates/openvpn.conf

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ OpenVPN –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π
sudo systemctl restart openvpn@server
```

### –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –Ω–µ–æ—Ç–∑—ã–≤—á–∏–≤–æ–π
- –í—ã—Å–æ–∫–∏–µ —Å—Ä–µ–¥–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏
- –ú–µ–¥–ª–µ–Ω–Ω—ã–π –æ—Ç–∫–ª–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏:**

```bash
# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CPU
top -p $(pgrep -f "node.*server.js")
htop  # –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∏—Å—Ç–µ–º—ã
uptime
cat /proc/loadavg

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ—Ü–µ—Å—Å–∞ OpenVPN
top -p $(pgrep openvpn)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ CPU-–∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux --sort=-%cpu | head -10
```

**–†–µ—à–µ–Ω–∏—è:**

```bash
# 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Node.js
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ NODE_ENV –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
echo "NODE_ENV=production" >> .env

# 2. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
# –î–æ–±–∞–≤–∏—Ç—å –≤ openvpn.conf:
echo "max-clients 10" >> certificates/openvpn.conf

# 3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —É—Å–∫–æ—Ä–µ–Ω–∏—è, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ AES-NI
grep -m1 -o aes /proc/cpuinfo
# –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —à–∏—Ñ—Ä AES-256-GCM (—É–∂–µ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω)

# 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞
# –ü–æ–Ω–∏–∂–µ–Ω–∏–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞ –¥–ª—è –Ω–µ–∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
renice +5 $(pgrep -f "node.*server.js")

# 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ systemd –¥–ª—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd)
sudo systemctl edit openvpn@server
# –î–æ–±–∞–≤–∏—Ç—å:
# [Service]
# CPUQuota=50%
# MemoryLimit=512M
```

### –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–∞–º—è—Ç—å—é

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –Ω–µ—Ö–≤–∞—Ç–∫–∏ –ø–∞–º—è—Ç–∏
- –°–∏—Å—Ç–µ–º–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç swap
- –°–±–æ–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
free -h
cat /proc/meminfo

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux --sort=-%mem | head -10
pmap $(pgrep -f "node.*server.js")

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
valgrind --tool=memcheck --leak-check=full node server.js  # –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è swap
swapon -s
cat /proc/swaps
```

**–†–µ—à–µ–Ω–∏—è:**

```bash
# 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ Node.js
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –ª–∏–º–∏—Ç–æ–≤ –ø–∞–º—è—Ç–∏
node --max-old-space-size=512 server.js

# 2. –†–µ–≥—É–ª—è—Ä–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –ª–æ–≥–æ–≤
# –î–æ–±–∞–≤–∏—Ç—å –≤ crontab
echo "0 2 * * * find /path/to/vpn/logs -name '*.log' -mtime +30 -delete" | crontab -

# 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ OpenVPN
# –î–æ–±–∞–≤–∏—Ç—å –≤ openvpn.conf:
echo "mlock" >> certificates/openvpn.conf  # –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü –ø–∞–º—è—Ç–∏

# 4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ swap –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ (–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
sudo fallocate -l 1G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile

# 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
cat > memory-monitor.sh << 'EOF'
#!/bin/bash
THRESHOLD=80
USAGE=$(free | awk 'FNR==2{printf "%.0f", $3/($3+$4)*100}')
if [ $USAGE -gt $THRESHOLD ]; then
    echo "–í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏: $USAGE%" | logger -t vpn-monitor
    # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ: –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
fi
EOF
chmod +x memory-monitor.sh
```

### –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ü–æ—Ç–µ—Ä—è –ø–∞–∫–µ—Ç–æ–≤
- –í—ã—Å–æ–∫–∏–µ —Å–µ—Ç–µ–≤—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏
- –†–∞–∑—Ä—ã–≤—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ —à–∞–≥–∏:**

```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ping -c 100 8.8.8.8 | tail -5  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ç–µ—Ä–∏ –ø–∞–∫–µ—Ç–æ–≤
mtr google.com  # –ê–Ω–∞–ª–∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ –ø—É—Ç–∏

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—à–∏–±–æ–∫ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
ip -s link show
netstat -i

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ç–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞
iftop  # –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
nethogs  # –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω
ss -i  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–∫–µ—Ç–æ–≤

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞
iptables -L -n -v  # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—á–µ—Ç—á–∏–∫–æ–≤ –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –ø—Ä–∞–≤–∏–ª–∞
```

**–†–µ—à–µ–Ω–∏—è:**

```bash
# 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞–∑–º–µ—Ä–æ–≤ —Å–µ—Ç–µ–≤—ã—Ö –±—É—Ñ–µ—Ä–æ–≤
# –°–∏—Å—Ç–µ–º–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏
echo 'net.core.rmem_max = 16777216' >> /etc/sysctl.conf
echo 'net.core.wmem_max = 16777216' >> /etc/sysctl.conf
echo 'net.ipv4.tcp_rmem = 4096 87380 16777216' >> /etc/sysctl.conf
echo 'net.ipv4.tcp_wmem = 4096 65536 16777216' >> /etc/sysctl.conf
sysctl -p

# 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±—É—Ñ–µ—Ä–æ–≤ OpenVPN
echo "sndbuf 393216" >> certificates/openvpn.conf
echo "rcvbuf 393216" >> certificates/openvpn.conf

# 3. –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä
# –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª iptables (–ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–∞–≤–∏–ª –Ω–∞–≤–µ—Ä—Ö)
npm run firewall:optimize

# 4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
echo 'net.netfilter.nf_conntrack_max = 65536' >> /etc/sysctl.conf
sysctl -p
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Ubuntu/Debian)
sudo apt-get install htop iotop iftop nethogs sysstat

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (CentOS/RHEL)
sudo yum install htop iotop iftop nethogs sysstat

# –í–∫–ª—é—á–µ–Ω–∏–µ —Å–±–æ—Ä–∞ —Å–∏—Å—Ç–µ–º–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
sudo systemctl enable sysstat
sudo systemctl start sysstat
```

### –°–∫—Ä–∏–ø—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
#!/bin/bash
# performance-monitor.sh - –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

LOG_FILE="performance-$(date +%Y%m%d).log"

while true; do
    echo "=== $(date) ===" >> $LOG_FILE
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU:" >> $LOG_FILE
    top -bn1 | grep "Cpu(s)" >> $LOG_FILE
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
    echo "–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:" >> $LOG_FILE
    free -h >> $LOG_FILE
    
    # –°–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    echo "–°–µ—Ç–µ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:" >> $LOG_FILE
    ip -s link show tun0 >> $LOG_FILE 2>/dev/null
    
    # VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    echo "–ê–∫—Ç–∏–≤–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:" >> $LOG_FILE
    ss -tuln | grep -E "(1194|3000)" >> $LOG_FILE
    
    # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ü–µ—Å—Å–∞—Ö
    echo "VPN –ø—Ä–æ—Ü–µ—Å—Å—ã:" >> $LOG_FILE
    ps aux | grep -E "(node|openvpn)" | grep -v grep >> $LOG_FILE
    
    echo "" >> $LOG_FILE
    
    sleep 300  # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
done
```

### –ü–∞–Ω–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
#!/bin/bash
# performance-dashboard.sh - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

while true; do
    clear
    echo "üñ•Ô∏è  –ü–∞–Ω–µ–ª—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Family VPN Server"
    echo "=============================================="
    echo "–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: $(date)"
    echo ""
    
    # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã
    echo "üìä –ó–∞–≥—Ä—É–∑–∫–∞ —Å–∏—Å—Ç–µ–º—ã:"
    uptime
    echo ""
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU
    echo "üî• –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CPU:"
    top -bn1 | grep "Cpu(s)" | awk '{print $2}' | sed 's/%us,//'
    echo ""
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
    echo "üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:"
    free -h | grep "Mem:"
    echo ""
    
    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
    echo "üíø –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞:"
    df -h / | tail -1
    echo ""
    
    # –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
    echo "üåê –°–µ—Ç–µ–≤—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã:"
    ip addr show | grep -E "(inet |UP|DOWN)" | grep -v "127.0.0.1"
    echo ""
    
    # –ê–∫—Ç–∏–≤–Ω—ã–µ VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
    echo "üîó VPN —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:"
    if [ -f "/var/log/openvpn/server.log" ]; then
        grep "CLIENT_LIST" /var/log/openvpn/server.log | tail -5
    else
        echo "–õ–æ–≥ OpenVPN –Ω–µ –Ω–∞–π–¥–µ–Ω"
    fi
    echo ""
    
    # –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
    echo "‚öôÔ∏è  –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤:"
    if pgrep -f "node.*server.js" > /dev/null; then
        echo "‚úÖ –í–µ–±-—Å–µ—Ä–≤–µ—Ä: –ó–∞–ø—É—â–µ–Ω"
    else
        echo "‚ùå –í–µ–±-—Å–µ—Ä–≤–µ—Ä: –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    fi
    
    if pgrep openvpn > /dev/null; then
        echo "‚úÖ OpenVPN: –ó–∞–ø—É—â–µ–Ω"
    else
        echo "‚ùå OpenVPN: –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
    fi
    
    sleep 5
done
```

## –ß–µ–∫-–ª–∏—Å—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–∏—Å—Ç–µ–º—ã

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è CPU**
  - [ ] –í–∫–ª—é—á–∏—Ç—å –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ —É—Å–∫–æ—Ä–µ–Ω–∏–µ (AES-NI)
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ —à–∏—Ñ—Ä—ã (AES-256-GCM)
  - [ ] –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ª–∏–º–∏—Ç—ã –ø–∞–º—è—Ç–∏ Node.js
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å swap –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  - [ ] –†–µ–≥—É–ª—è—Ä–Ω–æ –æ—á–∏—â–∞—Ç—å —Ñ–∞–π–ª—ã –ª–æ–≥–æ–≤
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–∏**
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–æ–≤
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π MTU
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ–∫–æ–ª UDP
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –±—Ä–∞–Ω–¥–º–∞—É—ç—Ä–∞

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞**
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSD —Ö—Ä–∞–Ω–∏–ª–∏—â–µ, –µ—Å–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ
  - [ ] –†–µ–≥—É–ª—è—Ä–Ω–∞—è —Ä–æ—Ç–∞—Ü–∏—è –ª–æ–≥–æ–≤
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –¥–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Node.js**
  - [ ] –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å NODE_ENV=production
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ OpenVPN**
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —à–∏—Ñ—Ä–æ–≤
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∂–∞—Ç–∏–µ
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –±—É—Ñ–µ—Ä–æ–≤
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º fast-io

- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞**
  - [ ] –ú–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å HTTP –∑–∞–ø—Ä–æ—Å—ã
  - [ ] –°–∂–∏–º–∞—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞
  - [ ] –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è

- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
  - [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä–æ–≥–∏ –æ–ø–æ–≤–µ—â–µ–Ω–∏–π

- [ ] **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∞–º–∏**
  - [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–æ—Ç–∞—Ü–∏—é –ª–æ–≥–æ–≤
  - [ ] –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä—ã –ª–æ–≥–æ–≤
  - [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤
  - [ ] –ê—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å—Ç–∞—Ä—ã–µ –ª–æ–≥–∏

## –ë–µ–Ω—á–º–∞—Ä–∫–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

```bash
#!/bin/bash
# baseline-test.sh - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

echo "üß™ –¢–µ—Å—Ç –±–∞–∑–æ–≤–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Family VPN Server"
echo "=================================================="

# –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
echo "–°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:"
uname -a
cat /proc/cpuinfo | grep "model name" | head -1
free -h | grep "Mem:"
df -h / | tail -1
echo ""

# –°–µ—Ç–µ–≤–∞—è –±–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è (–±–µ–∑ VPN)
echo "–°–µ—Ç–µ–≤–∞—è –±–∞–∑–æ–≤–∞—è –ª–∏–Ω–∏—è (–±–µ–∑ VPN):"
ping -c 10 8.8.8.8 | tail -1
echo ""

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤, –µ—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω—ã
if ! pgrep -f "node.*server.js" > /dev/null; then
    npm start &
    sleep 5
fi

# –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
echo "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞:"
time curl -s http://localhost:3000 > /dev/null
echo ""

# –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
echo "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤:"
time npm run generate-client test-perf-client > /dev/null 2>&1
echo ""

# –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
echo "–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å API:"
time curl -s -X POST http://localhost:3000/api/auth/login \
    -H "Content-Type: application/json" \
    -d '{"username":"test","password":"test"}' > /dev/null
echo ""

echo "–ë–∞–∑–æ–≤—ã–π —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω"
echo "–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è"
```

### –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
#!/bin/bash
# load-test.sh - –ü—Ä–æ—Å—Ç–æ–µ –Ω–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

echo "üî• –ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Family VPN Server"
echo "============================================="

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤–µ–±-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π..."
for i in {1..10}; do
    curl -s http://localhost:3000 > /dev/null &
done
wait

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ API
echo "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ API..."
for i in {1..20}; do
    curl -s -X GET http://localhost:3000/api/status > /dev/null &
done
wait

echo "–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ"
echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∞"
```

–ü–æ–º–Ω–∏—Ç–µ, —á—Ç–æ –Ω—É–∂–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ, –∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ç–µ–∫—É—â—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å —ç—Ç–∏–º–∏ –±–∞–∑–æ–≤—ã–º–∏ –ø–æ–∫–∞–∑–∞—Ç–µ–ª—è–º–∏ –¥–ª—è —Ä–∞–Ω–Ω–µ–≥–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –¥–µ–≥—Ä–∞–¥–∞—Ü–∏–∏.