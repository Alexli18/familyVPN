# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ –≤ Family VPN Server.

## –û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –ü—Ä–æ–±–ª–µ–º—ã —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (CA)

#### –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç CA –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ "CA certificate not found"
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã
- –û—à–∏–±–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–†–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ CA**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ CA
   ls -la easy-rsa/pki/ca.crt
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ CA
   openssl x509 -in easy-rsa/pki/ca.crt -text -noout
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ CA
   openssl x509 -in easy-rsa/pki/ca.crt -verify -noout
   ```

2. **–†–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è CA –ø—Ä–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏–∏**
   ```bash
   # –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ PKI
   cp -r easy-rsa/pki easy-rsa/pki.backup.$(date +%Y%m%d)
   
   # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ PKI
   cd easy-rsa
   ./easyrsa init-pki
   
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ CA
   ./easyrsa build-ca nopass
   ```

### –ü—Ä–æ–±–ª–µ–º—ã —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### –°–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏—Å—Ç–µ–∫

**–°–∏–º–ø—Ç–æ–º—ã:**
- VPN –∫–ª–∏–µ–Ω—Ç—ã –Ω–µ –º–æ–≥—É—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è
- –û—à–∏–±–∫–∏ "Certificate has expired"
- –û—à–∏–±–∫–∏ TLS handshake

**–†–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã –∏—Å—Ç–µ—á–µ–Ω–∏—è
   openssl x509 -in certificates/server.crt -enddate -noout
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   for cert in certificates/*.crt; do
     echo "–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç: $cert"
     openssl x509 -in "$cert" -enddate -noout
   done
   ```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞**
   ```bash
   # –û—Ç–∑—ã–≤ —Å—Ç–∞—Ä–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   cd easy-rsa
   ./easyrsa revoke server
   
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   ./easyrsa build-server-full server nopass
   
   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ CRL
   ./easyrsa gen-crl
   
   # –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   cp pki/issued/server.crt ../certificates/
   cp pki/private/server.key ../certificates/
   cp pki/crl.pem ../certificates/
   ```

### –ü—Ä–æ–±–ª–µ–º—ã –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

#### –û—à–∏–±–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ "Failed to generate client certificate"
- –ü—É—Å—Ç—ã–µ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã .ovpn
- –°–∫—Ä–∏–ø—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–∞—é—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π

**–†–µ—à–µ–Ω–∏—è:**

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Easy-RSA**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Easy-RSA
   cd easy-rsa
   ls -la pki/
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–∞ vars
   cat vars 2>/dev/null || echo "–§–∞–π–ª vars –Ω–µ –Ω–∞–π–¥–µ–Ω"
   
   # –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ Easy-RSA
   ./easyrsa show-ca
   ```

2. **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ –≤—Ä—É—á–Ω—É—é**
   ```bash
   # –ü–µ—Ä–µ—Ö–æ–¥ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é Easy-RSA
   cd easy-rsa
   
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–≥–æ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   ./easyrsa build-client-full client-name nopass
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
   ls -la pki/issued/client-name.crt
   ls -la pki/private/client-name.key
   ```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏—Å—Ç–µ–∫–∞—é—Ç –±–µ–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –ü—Ä–µ—Ä—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞ –∏–∑-–∑–∞ –∏—Å—Ç–µ–∫—à–∏—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

**–†–µ—à–µ–Ω–∏—è:**

1. **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏—Å—Ç–µ—á–µ–Ω–∏—è**
   ```bash
   # –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
   cat > scripts/check-cert-expiration.sh << 'EOF'
   #!/bin/bash
   WARN_DAYS=30
   CRITICAL_DAYS=7
   
   check_cert() {
     local cert_file="$1"
     local cert_name="$2"
     
     if [ ! -f "$cert_file" ]; then
       echo "‚ùå –°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω: $cert_file"
       return 1
     fi
     
     local expiry_date=$(openssl x509 -enddate -noout -in "$cert_file" | cut -d= -f2)
     local expiry_epoch=$(date -d "$expiry_date" +%s)
     local current_epoch=$(date +%s)
     local days_left=$(( (expiry_epoch - current_epoch) / 86400 ))
     
     if [ $days_left -lt $CRITICAL_DAYS ]; then
       echo "üö® –ö–†–ò–¢–ò–ß–ù–û: $cert_name –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ $days_left –¥–Ω–µ–π"
     elif [ $days_left -lt $WARN_DAYS ]; then
       echo "‚ö†Ô∏è  –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: $cert_name –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ $days_left –¥–Ω–µ–π"
     else
       echo "‚úÖ OK: $cert_name –∏—Å—Ç–µ–∫–∞–µ—Ç —á–µ—Ä–µ–∑ $days_left –¥–Ω–µ–π"
     fi
   }
   
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
   check_cert "easy-rsa/pki/ca.crt" "–¶–µ–Ω—Ç—Ä —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏"
   check_cert "certificates/server.crt" "–°–µ—Ä–≤–µ—Ä–Ω—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç"
   EOF
   
   chmod +x scripts/check-cert-expiration.sh
   ```

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
ls -la certificates/
ls -la easy-rsa/pki/issued/
ls -la easy-rsa/pki/private/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ø–æ—á–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
openssl verify -CAfile certificates/ca.crt certificates/server.crt

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ—Ç–∞–ª–µ–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
openssl x509 -in certificates/server.crt -text -noout

# –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞
sudo openvpn --config /etc/openvpn/openvpn.conf --test-crypto
```

## –°–≤—è–∑–∞–Ω–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤](../configuration/certificates.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- [–ü—Ä–æ–±–ª–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏](authentication.md) - –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- [–û–±—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã](common-issues.md) - –û–±—â–µ–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
- [–ü—Ä–æ—Ü–µ–¥—É—Ä—ã –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è](recovery.md) - –≠–∫—Å—Ç—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ—Ü–µ–¥—É—Ä—ã

<!-- auto-added placeholders to match EN structure -->

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 1)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 2)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 3)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 4)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 5)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 6)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 7)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 8)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 9)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 10)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 11)


## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞–∑–¥–µ–ª (–∑–∞–≥–ª—É—à–∫–∞ 12)


<!-- auto-added example blocks to match EN structure -->
```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```

```bash
echo "TODO: –ø–µ—Ä–µ–≤–µ—Å—Ç–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–º–µ—Ä"
```
