# Руководство по настройке клиентов

Это руководство поможет вам настроить VPN-клиенты на различных устройствах для подключения к вашему семейному VPN-серверу.

## Обзор

После запуска VPN-сервера вам необходимо:
1. Создать клиентские сертификаты
2. Установить программное обеспечение VPN-клиента на ваши устройства
3. Импортировать конфигурацию
4. Подключиться и проверить соединение

## Предварительные требования

Перед настройкой клиентов убедитесь, что у вас есть:
- Работающий VPN-сервер (см. [Установка Docker](docker.md) или [Локальная установка](local.md))
- Доступ к веб-порталу управления ИЛИ административный доступ для создания сертификатов
- Адрес VPN-сервера (IP или доменное имя)

## Шаг 1: Получение конфигурации VPN

### Вариант A: Веб-портал (Рекомендуется)

1. **Доступ к порталу управления**:
   - Откройте веб-браузер
   - Перейдите на `https://адрес-вашего-сервера:3000`
   - Вы увидите страницу входа

2. **Вход в систему**:
   - Введите имя пользователя и пароль, предоставленные администратором
   - Нажмите "Войти"

3. **Создание сертификата**:
   - После входа вы увидите страницу управления сертификатами
   - Нажмите "Создать новый сертификат"
   - Введите уникальное имя для вашего устройства (например, "john-laptop", "mary-iphone")
   - Нажмите "Создать сертификат"

4. **Загрузка конфигурации**:
   - Файл `.ovpn` будет автоматически загружен
   - Сохраните его в запоминающемся месте на вашем устройстве

### Вариант B: Командная строка (Администратор)

Если у вас есть административный доступ к серверу:

```bash
# Создание нового клиентского сертификата
npm run generate-client

# Следуйте подсказкам для ввода имени клиента
# Файл .ovpn будет создан в директории certificates
```

### Вариант C: Запрос у администратора

Если у вас нет прямого доступа:
1. Обратитесь к администратору VPN
2. Запросите конфигурацию VPN для вашего устройства
3. Предоставьте уникальное имя для вашего устройства
4. Дождитесь, пока они отправят вам файл `.ovpn`

## Шаг 2: Установка программного обеспечения VPN-клиента

Выберите подходящий клиент для вашего устройства:

### Windows

1. **Загрузка OpenVPN Connect**:
   - Перейдите на https://openvpn.net/client-connect-vpn-for-windows/
   - Загрузите и установите "OpenVPN Connect"

2. **Импорт конфигурации**:
   - Откройте OpenVPN Connect
   - Нажмите кнопку "+"
   - Выберите "File" и найдите ваш файл `.ovpn`
   - Нажмите "Add"

3. **Подключение**:
   - Нажмите на имя вашего профиля
   - Переключите переключатель подключения в положение "ON"
   - Введите необходимые учетные данные, если потребуется

### macOS

1. **Загрузка Tunnelblick** (Бесплатно):
   - Перейдите на https://tunnelblick.net/
   - Загрузите и установите Tunnelblick
   - Следуйте инструкциям по установке

2. **Импорт конфигурации**:
   - Дважды щелкните на файле `.ovpn`
   - Tunnelblick предложит установить конфигурацию
   - Нажмите "Install" и введите пароль Mac

3. **Подключение**:
   - Нажмите на иконку Tunnelblick в строке меню
   - Выберите вашу конфигурацию
   - Нажмите "Connect"

### iPhone/iPad

1. **Загрузка OpenVPN Connect**:
   - Откройте App Store
   - Найдите "OpenVPN Connect"
   - Установите приложение

2. **Импорт конфигурации**:
   - Отправьте файл `.ovpn` себе по электронной почте
   - Откройте письмо на iPhone/iPad
   - Нажмите на вложение `.ovpn`
   - Выберите "Copy to OpenVPN"

3. **Подключение**:
   - Откройте OpenVPN Connect
   - Нажмите на ваш профиль
   - Нажмите переключатель подключения

### Android

1. **Загрузка OpenVPN для Android**:
   - Откройте Google Play Store
   - Найдите "OpenVPN for Android"
   - Установите приложение

2. **Импорт конфигурации**:
   - Скопируйте файл `.ovpn` на ваше устройство
   - Откройте OpenVPN для Android
   - Нажмите кнопку "+"
   - Выберите "Import Profile from SD card"
   - Найдите ваш файл `.ovpn`

3. **Подключение**:
   - Нажмите на имя вашего профиля
   - Нажмите "Connect"

### Linux

1. **Установка OpenVPN**:
   ```bash
   # Ubuntu/Debian
   sudo apt install openvpn
   
   # CentOS/RHEL/Fedora
   sudo yum install openvpn  # или dnf install openvpn
   
   # Arch Linux
   sudo pacman -S openvpn
   ```

2. **Подключение**:
   ```bash
   sudo openvpn --config /путь/к/вашему-конфигу.ovpn
   ```

## Шаг 3: Проверка подключения

После подключения проверьте, что ваш VPN работает:

1. **Проверьте ваш IP-адрес**:
   - Перейдите на https://whatismyipaddress.com/
   - Ваш IP должен показывать местоположение VPN-сервера, а не ваше реальное местоположение

2. **Тест DNS**:
   - Перейдите на https://dnsleaktest.com/
   - Запустите тест, чтобы убедиться, что DNS-запросы идут через VPN

3. **Проверка утечек WebRTC**:
   - Перейдите на https://browserleaks.com/webrtc
   - Убедитесь, что ваш реальный IP не виден

## Управление несколькими устройствами

Если у вас несколько устройств (телефон, ноутбук, планшет):

1. **Создавайте отдельные сертификаты**:
   - Каждое устройство должно иметь свой сертификат
   - Используйте описательные имена (например, "john-laptop", "john-phone")

2. **Ведите учет ваших устройств**:
   - Составьте список, какой сертификат на каком устройстве
   - Отмечайте, когда сертификаты были созданы

3. **Регулярное обслуживание**:
   - Удаляйте сертификаты с устройств, которые больше не используете
   - Запрашивайте новые сертификаты до истечения срока действия старых

## Лучшие практики безопасности

### Защита вашей конфигурации
- Обеспечьте безопасность файлов `.ovpn` и не делитесь ими
- Удаляйте файлы конфигурации из электронной почты после загрузки
- Храните их в безопасном месте на вашем устройстве

### Безопасность устройства
- Используйте надежную безопасность устройства (блокировка экрана, обновления, антивирус)
- Поддерживайте программное обеспечение VPN-клиента в актуальном состоянии
- Включайте автоматические обновления безопасности где возможно

### Мониторинг подключений
- Всегда проверяйте статус VPN перед просмотром конфиденциального контента
- Периодически проверяйте ваш IP-адрес, чтобы убедиться, что VPN работает
- Отключайтесь, когда не нужно, чтобы сэкономить батарею/трафик

### Потерянные или украденные устройства
Если устройство с доступом к VPN потеряно или украдено:
1. Немедленно обратитесь к администратору
2. Запросите отзыв сертификата для потерянного устройства
3. Создайте новые сертификаты для замещающих устройств
4. Смените пароли для всех аккаунтов, к которым обращались через VPN

## Устранение неполадок

Для подробной информации по устранению неполадок см. [Руководство по устранению неполадок](../troubleshooting/common-issues.md).

### Распространенные проблемы

#### Проблемы с подключением
- **"Connection timeout"**: Проверьте интернет-соединение и адрес сервера
- **"Authentication failed"**: Сертификат может быть просрочен или отозван
- **"Подключен, но нет интернета"**: Попробуйте отключиться и подключиться снова

#### Проблемы с производительностью
- **Медленные скорости**: Проверьте нагрузку на сервер и попробуйте в другое время
- **Частые отключения**: Проверьте стабильность интернет-соединения

### Получение помощи

При обращении в поддержку предоставьте:
- Информацию об устройстве (ОС, версия VPN-клиента)
- Точные сообщения об ошибках
- Когда началась проблема
- Информацию о сети (провайдер, тип подключения)

## Следующие шаги

После успешной настройки клиента:
1. **Просмотрите [Лучшие практики безопасности](../security/best-practices.md)**
2. **Изучите [Управление сертификатами](../configuration/certificates.md)**
3. **Проверьте [Руководства по устранению неполадок](../troubleshooting/)** для распространенных проблем
4. **Изучите [Расширенную конфигурацию](../configuration/)** опции